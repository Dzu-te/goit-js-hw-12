{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst BASE_URL = `https://pixabay.com/api/`;\nconst API_KEY = '42024454-8ed2ac239bcd0125bd4fa3d9e';\n\nconst form = document.querySelector('.handleSearchSubmit');\nconst cardContainer = document.querySelector('.card_container');\n\nconst loader = document.createElement('div');\nloader.classList.add('loader');\nloader.textContent = 'Loading...';\n\nfunction showErrorMessage(message) {\n  iziToast.error({\n    title: 'Error',\n    message,\n  });\n}\n\nfunction showWarningMessage(message) {\n  iziToast.warning({\n    title: 'Warning',\n    message,\n  })\n}\n\nfunction showLoader() {\n  document.body.appendChild(loader);\n}\n\nfunction hideLoader() {\n  document.body.removeChild(loader);\n}\n\nform.addEventListener('submit', onSearchSubmit);\n\nfunction fetchImages(q) {\n  showLoader();\n\n  const params = new URLSearchParams({\n    key: API_KEY,\n    q: q,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n  });\n\n  const url = `${BASE_URL}?${params.toString()}`;\n\n  return axios.get(url);\n}\n\nasync function onSearchSubmit(event) {\n  event.preventDefault();\n\n  const searchInput = form.elements.search;\n  const searchValue = searchInput.value.trim();\n\n  if (!searchValue) {\n    showWarningMessage('Please enter your search term.');    \n    return;\n  }\n  try {\n    const response = await fetchImages(searchValue);\n\n    createMarkup(response.data.hits);\n    initializeLightbox();\n    console.log(response);\n    if (response.data.hits.length === 0) {\n      showErrorMessage('No results were found for your request.');\n    }\n  } catch (error) {\n    showErrorMessage(\n      'Error fetching images: An error occurred while fetching images. Please try again later.'\n    );\n  } finally {\n    hideLoader();\n    form.reset();\n  }\n}\n\nfunction createMarkup(images) {\n  cardContainer.innerHTML = '';\n\n  const markup = images\n    .map(\n      image => `\n    <a class=\"card\" href=\"${image.largeImageURL}\">\n  <img src=\"${image.webformatURL}\" alt=\"${image.tags}\">\n  <div class=\"info\">\n    <span class=\"info-item\">\n      <strong>Likes:</strong>\n      <p class=\"info-item-count\">${image.likes}</p>\n    </span>\n\n    <span class=\"info-item\">\n      <strong>Views:</strong>\n      <p class=\"info-item-count\">${image.views}</p>\n    </span>\n\n    <span class=\"info-item\">\n      <strong>Comments:</strong>\n      <p class=\"info-item-count\">${image.comments}</p>\n    </span>\n\n    <span class=\"info-item\">\n      <strong>Downloads:</strong>\n      <p class=\"info-item-count\">${image.downloads}</p>\n    </span>\n  </div>\n</a>\n  `\n    )\n    .join('');\n\n  cardContainer.innerHTML = markup;\n}\n\nfunction initializeLightbox() {\n  const lightbox = new SimpleLightbox('.card_container a');\n  lightbox.refresh();\n}\n"],"names":["BASE_URL","API_KEY","form","cardContainer","loader","showErrorMessage","message","iziToast","showWarningMessage","showLoader","hideLoader","onSearchSubmit","fetchImages","q","params","url","axios","event","searchValue","response","createMarkup","initializeLightbox","images","markup","image","SimpleLightbox"],"mappings":"owBAMA,MAAMA,EAAW,2BACXC,EAAU,qCAEVC,EAAO,SAAS,cAAc,qBAAqB,EACnDC,EAAgB,SAAS,cAAc,iBAAiB,EAExDC,EAAS,SAAS,cAAc,KAAK,EAC3CA,EAAO,UAAU,IAAI,QAAQ,EAC7BA,EAAO,YAAc,aAErB,SAASC,EAAiBC,EAAS,CACjCC,EAAS,MAAM,CACb,MAAO,QACP,QAAAD,CACJ,CAAG,CACH,CAEA,SAASE,EAAmBF,EAAS,CACnCC,EAAS,QAAQ,CACf,MAAO,UACP,QAAAD,CACJ,CAAG,CACH,CAEA,SAASG,GAAa,CACpB,SAAS,KAAK,YAAYL,CAAM,CAClC,CAEA,SAASM,GAAa,CACpB,SAAS,KAAK,YAAYN,CAAM,CAClC,CAEAF,EAAK,iBAAiB,SAAUS,CAAc,EAE9C,SAASC,EAAYC,EAAG,CACtBJ,IAEA,MAAMK,EAAS,IAAI,gBAAgB,CACjC,IAAKb,EACL,EAAGY,EACH,WAAY,QACZ,YAAa,aACb,WAAY,EAChB,CAAG,EAEKE,EAAM,GAAGf,KAAYc,EAAO,SAAU,IAE5C,OAAOE,EAAM,IAAID,CAAG,CACtB,CAEA,eAAeJ,EAAeM,EAAO,CACnCA,EAAM,eAAc,EAGpB,MAAMC,EADchB,EAAK,SAAS,OACF,MAAM,KAAI,EAE1C,GAAI,CAACgB,EAAa,CAChBV,EAAmB,gCAAgC,EACnD,MACD,CACD,GAAI,CACF,MAAMW,EAAW,MAAMP,EAAYM,CAAW,EAE9CE,EAAaD,EAAS,KAAK,IAAI,EAC/BE,IACA,QAAQ,IAAIF,CAAQ,EAChBA,EAAS,KAAK,KAAK,SAAW,GAChCd,EAAiB,yCAAyC,CAE7D,MAAC,CACAA,EACE,yFACN,CACA,QAAY,CACRK,IACAR,EAAK,MAAK,CACX,CACH,CAEA,SAASkB,EAAaE,EAAQ,CAC5BnB,EAAc,UAAY,GAE1B,MAAMoB,EAASD,EACZ,IACCE,GAAS;AAAA,4BACaA,EAAM;AAAA,cACpBA,EAAM,sBAAsBA,EAAM;AAAA;AAAA;AAAA;AAAA,mCAIbA,EAAM;AAAA;AAAA;AAAA;AAAA;AAAA,mCAKNA,EAAM;AAAA;AAAA;AAAA;AAAA;AAAA,mCAKNA,EAAM;AAAA;AAAA;AAAA;AAAA;AAAA,mCAKNA,EAAM;AAAA;AAAA;AAAA;AAAA,GAKpC,EACA,KAAK,EAAE,EAEVrB,EAAc,UAAYoB,CAC5B,CAEA,SAASF,GAAqB,CACX,IAAII,EAAe,mBAAmB,EAC9C,QAAO,CAClB"}