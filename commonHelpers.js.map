{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst BASE_URL = `https://pixabay.com/api/`;\nconst API_KEY = '42024454-8ed2ac239bcd0125bd4fa3d9e';\n\nconst form = document.querySelector('.handleSearchSubmit');\nconst cardContainer = document.querySelector('.card_container');\nconst loadMoreButton = document.querySelector('.btn-show-more');\nconst hiddenClass = 'is-hidden';\nloadMoreButton.addEventListener(\"click\", handleLoadMore);\nconst loader = document.querySelector('.loader');\n\n\nlet currentPage = 1;\nlet searchQuery = '';\nlet maxPage = 0;\n\nfunction showErrorMessage(message) {\n  iziToast.error({\n    title: 'Error',\n    message,\n  });\n}\n\nfunction showWarningMessage(message) {\n  iziToast.warning({\n    title: 'Warning',\n    message,\n  });\n}\n\nfunction showInfo(message) {\n  iziToast.show({\n    title: 'Alert',\n    message,\n});\n}\n\nfunction showLoader() {\n  // document.body.appendChild(loader);\n  loader.classList.remove(hiddenClass);\n}\n\nfunction hideLoader() {\n  // document.body.removeChild(loader);\n  loader.classList.add(hiddenClass);\n}\n\nform.addEventListener('submit', onSearchSubmit);\n\nfunction fetchImages(q) {\n  showLoader();\n\n  const params = new URLSearchParams({\n    key: API_KEY,\n    q: q,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: 15,\n    page: currentPage,\n  });\n  console.log({q})\n  const url = `${BASE_URL}?${params.toString()}`;\n  searchQuery = q;\n  return axios.get(url);\n}\n\nasync function onSearchSubmit(event) {\n  event.preventDefault();\n  \n  const searchInput = form.elements.search;\n  const searchValue = searchInput.value.trim();\n\n  if (!searchValue) {\n    showWarningMessage('Please enter your search term.');\n    return;\n  }\n  if (searchValue !== searchQuery) {\n    cardContainer.innerHTML = '';\n    currentPage = 1;\n  }\n  try {\n    const response = await fetchImages(searchValue);\n\n    createMarkup(response.data.hits);\n    \n    initializeLightbox();\n    console.log(response);\n    console.log(response.data.hits);\n    if (response.data.hits.length === 0) {\n      loadMoreButton.classList.add(hiddenClass);\n      \n      showErrorMessage('No results were found for your request.');\n    } else {\n      loadMoreButton.classList.remove(hiddenClass);\n      \n    }\n  } catch (error) {\n    showErrorMessage(\n      'Error fetching images: An error occurred while fetching images. Please try again later.'\n    );\n  } finally {\n    hideLoader();\n    form.reset();\n  }\n}\n\n// ==============================================\n\nasync function handleLoadMore(event) {\n  currentPage += 1;\n\n  try {\n    const response = await fetchImages(searchQuery);\n    createMarkup(response.data.hits);\n    if (response.data.hits.length < 15) {\n      loadMoreButton.classList.add(hiddenClass);\n      showInfo(\"We're sorry, but you've reached the end of search results.\")\n    }\n  } catch (error) {\n    showErrorMessage(\n      'Error fetching images: An error occurred while fetching images. Please try again later.'\n    );\n  } finally {\n    hideLoader();\n    initializeLightbox();\n\n\n  }\n};\n// ===============================================\n\n  \nfunction createMarkup(images) {\n  \n\n  const markup = images\n    .map(\n      image => `\n    <a class=\"card\" href=\"${image.largeImageURL}\">\n  <img src=\"${image.webformatURL}\" alt=\"${image.tags}\">\n  <div class=\"info\">\n    <span class=\"info-item\">\n      <strong>Likes:</strong>\n      <p class=\"info-item-count\">${image.likes}</p>\n    </span>\n\n    <span class=\"info-item\">\n      <strong>Views:</strong>\n      <p class=\"info-item-count\">${image.views}</p>\n    </span>\n\n    <span class=\"info-item\">\n      <strong>Comments:</strong>\n      <p class=\"info-item-count\">${image.comments}</p>\n    </span>\n\n    <span class=\"info-item\">\n      <strong>Downloads:</strong>\n      <p class=\"info-item-count\">${image.downloads}</p>\n    </span>\n  </div>\n</a>\n  `\n    )\n    .join('');\n\n  cardContainer.innerHTML += markup;\n}\n\nfunction initializeLightbox() {\n  const lightbox = new SimpleLightbox('.card_container a');\n  lightbox.refresh();\n}\n"],"names":["BASE_URL","API_KEY","form","cardContainer","loadMoreButton","hiddenClass","handleLoadMore","loader","currentPage","searchQuery","showErrorMessage","message","iziToast","showWarningMessage","showInfo","showLoader","hideLoader","onSearchSubmit","fetchImages","q","params","url","axios","event","searchValue","response","createMarkup","initializeLightbox","images","markup","image","SimpleLightbox"],"mappings":"owBAMA,MAAMA,EAAW,2BACXC,EAAU,qCAEVC,EAAO,SAAS,cAAc,qBAAqB,EACnDC,EAAgB,SAAS,cAAc,iBAAiB,EACxDC,EAAiB,SAAS,cAAc,gBAAgB,EACxDC,EAAc,YACpBD,EAAe,iBAAiB,QAASE,CAAc,EACvD,MAAMC,EAAS,SAAS,cAAc,SAAS,EAG/C,IAAIC,EAAc,EACdC,EAAc,GAGlB,SAASC,EAAiBC,EAAS,CACjCC,EAAS,MAAM,CACb,MAAO,QACP,QAAAD,CACJ,CAAG,CACH,CAEA,SAASE,EAAmBF,EAAS,CACnCC,EAAS,QAAQ,CACf,MAAO,UACP,QAAAD,CACJ,CAAG,CACH,CAEA,SAASG,EAASH,EAAS,CACzBC,EAAS,KAAK,CACZ,MAAO,QACP,QAAAD,CACJ,CAAC,CACD,CAEA,SAASI,GAAa,CAEpBR,EAAO,UAAU,OAAOF,CAAW,CACrC,CAEA,SAASW,GAAa,CAEpBT,EAAO,UAAU,IAAIF,CAAW,CAClC,CAEAH,EAAK,iBAAiB,SAAUe,CAAc,EAE9C,SAASC,EAAYC,EAAG,CACtBJ,IAEA,MAAMK,EAAS,IAAI,gBAAgB,CACjC,IAAKnB,EACL,EAAGkB,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAMX,CACV,CAAG,EACD,QAAQ,IAAI,CAAC,EAAAW,CAAC,CAAC,EACf,MAAME,EAAM,GAAGrB,KAAYoB,EAAO,SAAU,IAC5C,OAAAX,EAAcU,EACPG,EAAM,IAAID,CAAG,CACtB,CAEA,eAAeJ,EAAeM,EAAO,CACnCA,EAAM,eAAc,EAGpB,MAAMC,EADctB,EAAK,SAAS,OACF,MAAM,KAAI,EAE1C,GAAI,CAACsB,EAAa,CAChBX,EAAmB,gCAAgC,EACnD,MACD,CACGW,IAAgBf,IAClBN,EAAc,UAAY,GAC1BK,EAAc,GAEhB,GAAI,CACF,MAAMiB,EAAW,MAAMP,EAAYM,CAAW,EAE9CE,EAAaD,EAAS,KAAK,IAAI,EAE/BE,IACA,QAAQ,IAAIF,CAAQ,EACpB,QAAQ,IAAIA,EAAS,KAAK,IAAI,EAC1BA,EAAS,KAAK,KAAK,SAAW,GAChCrB,EAAe,UAAU,IAAIC,CAAW,EAExCK,EAAiB,yCAAyC,GAE1DN,EAAe,UAAU,OAAOC,CAAW,CAG9C,MAAC,CACAK,EACE,yFACN,CACA,QAAY,CACRM,IACAd,EAAK,MAAK,CACX,CACH,CAIA,eAAeI,EAAeiB,EAAO,CACnCf,GAAe,EAEf,GAAI,CACF,MAAMiB,EAAW,MAAMP,EAAYT,CAAW,EAC9CiB,EAAaD,EAAS,KAAK,IAAI,EAC3BA,EAAS,KAAK,KAAK,OAAS,KAC9BrB,EAAe,UAAU,IAAIC,CAAW,EACxCS,EAAS,4DAA4D,EAExE,MAAC,CACAJ,EACE,yFACN,CACA,QAAY,CACRM,IACAW,GAGD,CACH,CAIA,SAASD,EAAaE,EAAQ,CAG5B,MAAMC,EAASD,EACZ,IACCE,GAAS;AAAA,4BACaA,EAAM;AAAA,cACpBA,EAAM,sBAAsBA,EAAM;AAAA;AAAA;AAAA;AAAA,mCAIbA,EAAM;AAAA;AAAA;AAAA;AAAA;AAAA,mCAKNA,EAAM;AAAA;AAAA;AAAA;AAAA;AAAA,mCAKNA,EAAM;AAAA;AAAA;AAAA;AAAA;AAAA,mCAKNA,EAAM;AAAA;AAAA;AAAA;AAAA,GAKpC,EACA,KAAK,EAAE,EAEV3B,EAAc,WAAa0B,CAC7B,CAEA,SAASF,GAAqB,CACX,IAAII,EAAe,mBAAmB,EAC9C,QAAO,CAClB"}